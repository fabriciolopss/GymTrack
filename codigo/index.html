<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles/style.css">
  <link rel="stylesheet" href="styles/dashboard.css">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://cdn.jsdelivr.net/npm/gridstack@7.2.3/dist/gridstack.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/gridstack@7.2.3/dist/gridstack-all.js"></script>
  <script src="https://kit.fontawesome.com/64b9a24b58.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>


  <div class="modal fade" id="checkinTreino" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <i class="fa-solid fa-dumbbell"></i>
          <h5 class="modal-title" id="exampleModalLabel">Registrar treino</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="form-checkin">
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Plano de treino</label>
              <select required class="form-select" id="training-plans" aria-label="Default select example">
                <option selected>Selecionar o plano de treino realizado</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label">Treino realizado</label>
              <select class="form-select" id="training-days" aria-label="Default select example" disabled>
                <option selected>Selecionar dia do treino realizado</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label">Data do treino</label>
              <input type="date" class="form-control" id="date-checkin">
            </div>

            <div class="mb-3">
              <label class="form-label">Tempo de treino</label>

              <div class="d-flex gap-3 mt-2">
                <div class="w-50">
                  <label for="hours-trained" class="form-label">Horas</label>
                  <div class="input-group">
                    <button class="btn btn-outline-secondary" id="decrement-hours" type="button">
                      <i class="fa-solid fa-minus"></i>
                    </button>
                    <input type="number" id="hours-trained" class="form-control text-center" value="0" min="0" max="3">
                    <button class="btn btn-outline-secondary" id="increment-hours" type="button">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                  </div>
                </div>

                <div class="w-50">
                  <label for="minutes-trained" class="form-label">Minutos</label>
                  <div class="input-group">
                    <button class="btn btn-outline-secondary" id="decrement-minutes" type="button">
                      <i class="fa-solid fa-minus"></i>
                    </button>
                    <input type="number" id="minutes-trained" class="form-control text-center" value="30" min="0"
                      max="59">
                    <button class="btn btn-outline-secondary" id="increment-minutes" type="button">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>



            <div class="xp-gain mb-3">
              <label class="form-label titulo-modal">Experiencia ganha</label>
              <div class="d-flex flex-row justify-content-between mb-2">
                <div class="d-flex flex-row align-items-center" data-bs-toggle="tooltip" data-bs-placement="top"
                  title="O ganho de XP √© baseado na dura√ß√£o do treino e no plano escolhido.">
                  <span id="xp-gain">+0 XP
                  </span>
                  <i class="fa-solid fa-circle-info ms-2 ">
                  </i>
                </div>
                <span id="xp-porcentagem">0%</span>
                <span id="level">N√≠vel 0</span>
              </div>
              <div class="custom-progress-wrapper mb-1">
                <div class="real-progress-bar"></div>
                <div class="future-progress-bar"></div>
              </div>


              <div class="d-flex flex-row justify-content-between">
                <span id="xp-low-limit">1320XP</span>
                <span id="xp-high-limit">5000XP</span>
              </div>
            </div>


            <button type="submit" class="btn btn-primary">Registrar treino</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="content-wrapper">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <img src="images/logo.png" alt="GymApp Logo" class="logo-img">
        </div>
      </div>
      <div class="sidebar-toggle" id="sidebarToggle">
        <div class="toggle-icon">
          <i class="fas fa-chevron-left"></i>
        </div>
      </div>
      <nav class="sidebar-nav">
        <div class="header-item" redirect-session-name="perfil">
          <i data-lucide="user"></i>
          <span class="nav-text">Perfil</span>
        </div>
        <div class="header-item" redirect-session-name="index">
          <i data-lucide="layout-dashboard"></i>
          <span class="nav-text">Dashboard</span>
        </div>
        <div class="header-item" redirect-session-name="consultar-fichas">
          <i data-lucide="clipboard-list"></i>
          <span class="nav-text">Consultar fichas</span>
        </div>
        <div class="header-item" redirect-session-name="progresso">
          <i data-lucide="trending-up"></i>
          <span class="nav-text">Progresso</span>
        </div>
        <div class="header-item" redirect-session-name="cadastro">
          <i data-lucide="user-plus"></i>
          <span class="nav-text">Cadastro</span>
        </div>
        <div class="header-item" redirect-session-name="historico">
          <i data-lucide="History"></i>
          <span class="nav-text">Hist√≥rico</span>
        </div>
        <div class="header-item-wrapper position-relative" redirect-session-name="notificacoes">
          <div class="position-relative">
            <i data-lucide="bell-dot"></i>
            <span id="notification-count"
              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary">
            </span>
          </div>

          <span class="nav-text">Notifica√ß√µes</span>

        </div>

        <div class="notification-system-wrapper">
          <div class="notification-header-wrapper d-flex flex-row justify-content-between">
            <div class="notification-title">Notifica√ß√µes</div>
            <div class="d-flex flex-row gap-1 align-items-center">
              <i class="fa-solid fa-check-double"></i>
              <div class="as-read">Marcar como lidas</div>
            </div>
          </div>

          <div class="notification-system-body"></div>
        </div>
      </nav>
      <div class="sidebar-footer">
        <button class="btn btn-primary w-100 abrir-modal"
          style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); border: none; white-space: nowrap; display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1rem; font-weight: 600; border-radius: 0.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.3s ease;"
          data-bs-toggle="modal" data-bs-target="#checkinTreino">
          <i data-lucide="Dumbbell"></i>
          <span class="nav-text">Registrar treino</span>
        </button>
      </div>
    </aside>
    <main class="main-content">
      <div class="dashboard-wrapper">
        <div class="dashboard-header">
          <p class="dashboard-subtitle">Bem vindo de volta, <span id="user-name"></span>üëã</p>
          <p class="dashboard-title">Um breve resumo dos seus treinos!</p>
        </div>

        <div class="row">
          <div class="col-md-4">
              <div class="card" style="border-radius: 1rem; padding: 1rem;">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <i class="fa-solid fa-clock me-2" style="font-size: 1.5rem;"></i>
                    <h5 class="card-title mb-0" style="font-size: 1.5rem; font-weight: bold;">Resumo do progresso</h5>
                  </div>

                  <div class="d-flex justify-content-between mb-3 gap-2" style="overflow-x: auto; padding-bottom: 10px;">
                    <!-- Dates - this should be dynamic in a real app -->
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #e6f4ea; border: 1px solid #4CAF50;">
                      <div style="font-size: 0.75rem; color: #4CAF50;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold; color: #4CAF50;">16</div>
                    </div>
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                     <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                    <div class="text-center" style="min-width: 60px; padding: 5px; border-radius: 0.5rem; background-color: #f0f0f0;">
                      <div style="font-size: 0.75rem; color: #6c757d;">MAIO</div>
                      <div style="font-size: 1.25rem; font-weight: bold;">16</div>
                    </div>
                  </div>

                  <p class="mb-4" style="font-size: 1.1rem; font-weight: 500;">Dia 16 de maio de 2025</p>

                  <div class="row">
                    <div class="col-4">
                      <div class="card text-center" style="background-color: #fff9c4; border-radius: 0.75rem; padding: 10px;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div style="background-color: #ffeb3b; border-radius: 50%; padding: 5px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                <i class="fa-solid fa-fire" style="color: black;"></i>
                            </div>
                            <i class="fa-solid fa-ellipsis-v"></i>
                        </div>

                        <div class="d-flex align-items-center">
                          <h2 class="mt-2" style="font-weight: bold; font-size: 2.5rem;">6</h2>
                          <span style="font-size: 0.9rem; color: #6c757d;">dias sem falhar</span>
                        </div>
                      </div>
                    </div>

                    <div class="col-4">
                      <div class="card text-center" style="background-color: #e1bee7; border-radius: 0.75rem; padding: 10px;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div style="background-color: #ce93d8; border-radius: 50%; padding: 5px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                <i class="fa-solid fa-dumbbell" style="color: black;"></i>
                            </div>
                            <i class="fa-solid fa-ellipsis-v"></i>
                        </div>

                        <div class="d-flex align-items-center">
                          <h2 class="mt-2" style="font-weight: bold; font-size: 2.5rem;">36</h2>
                          <span style="font-size: 0.9rem; color: #6c757d;">s√©ries</span>
                        </div>
                      </div>
                    </div>

                    <div class="col-4">
                      <div class="card text-center" style="background-color: #b3e5fc; border-radius: 0.75rem; padding: 10px;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div style="background-color: #81d4fa; border-radius: 50%; padding: 5px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                <i class="fa-solid fa-hourglass-half" style="color: black;"></i>
                            </div>
                            <i class="fa-solid fa-ellipsis-v"></i>
                        </div>

                        <div class="d-flex align-items-center">
                          <h2 class="mt-2" style="font-weight: bold; font-size: 2.5rem;">120</h2>
                          <span style="font-size: 0.9rem; color: #6c757d;">minutos</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>

          <div class="col-md-4">
            <div class="card" style="border-radius: 1rem; padding: 1rem;">
              <div class="card-body">
                <div class="d-flex align-items-center mb-2">
                    <i class="fa-solid fa-clock me-2" style="font-size: 1.5rem;"></i>
                    <h5 class="card-title mb-0" style="font-size: 1.25rem; font-weight: bold;">Progresso de volume total</h5>
                </div>
                <div class="d-flex align-items-center mb-3">
                    <select id="equipamentoVolumeSelect" class="form-select form-select-sm me-2" aria-label="Selecionar equipamento" style="width: auto; font-size: 1rem; font-weight: 500; border: none; background-color: transparent; padding-left: 0;">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
                <canvas id="volumeChart"></canvas>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card" style="border-radius: 1rem; padding: 1rem;">
              <div class="card-body">
                <div class="d-flex align-items-center mb-2">
                    <i class="fa-solid fa-chart-line me-2" style="font-size: 1.5rem;"></i>
                    <h5 class="card-title mb-0" style="font-size: 1.25rem; font-weight: bold;">Progress√£o de carga</h5>
                </div>
                <div class="d-flex align-items-center mb-3">
                    <select id="equipamentoCargaSelect" class="form-select form-select-sm me-2" aria-label="Selecionar equipamento" style="width: auto; font-size: 1rem; font-weight: 500; border: none; background-color: transparent; padding-left: 0;">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
                <div class="row align-items-center">
                    <div class="col-5">
                        <p class="mb-1" style="font-size: 0.9rem; color: #6c757d;">Maior carga para esse exerc√≠cio</p>
                        <p class="mb-0" style="font-size: 3.5rem; font-weight: bold;">65<span style="font-size: 1.5rem; font-weight: normal; color: #6c757d;">kg</span></p>
                    </div>
                    <div class="col-7">
                        <canvas id="progressaoCargaChart"></canvas>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="dashboard-body d-none">
          <div class="grid-stack d-none">
          </div>
        </div>

      </div>
    </main>
  </div>

  <div id="toast-template" class="toast align-items-center border-0 text-white d-none" role="alert"
    aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">Mensagem padr√£o</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
        aria-label="Close"></button>
    </div>
  </div>

  </div>

  <div id="toast-container" class="position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>
  </div>
</body>

</html>

<script>
  lucide.createIcons();
  document.addEventListener("DOMContentLoaded", function () {
    const initialData = {
      notifications: [{
        dateTime: new Date(), title: "Titulo", description: "Teste de descri√ß√£o para a tarefa", type: "Creation",
      },
      {
        dateTime: new Date("2025-05-09"), title: "Notificacao1", description: "Teste de descri√ß√£o para a tarefa", type: "Creation",
      },
      {
        dateTime: new Date("2025-05-06"), title: "Notificacao2", description: "Teste de descri√ß√£o para a tarefa", type: "Creation",
      },
      {
        dateTime: new Date("2025-05-06"), title: "Notificacao3", description: "Teste de descri√ß√£o para a tarefa", type: "Creation"
      },
      {
        dateTime: new Date("2025-05-04"), title: "Notificacao4", description: "Teste de descri√ß√£o para a tarefa", type: "Creation"
      }],
      profile: {
        name: "Fabricio",
        xp: 1320,
        achievements: [1, 2, 3]
      },
      registered_trainings: [
        {
          training_id: 1,
          date: "2025-05-03",
          day_index: 1,
          duration: {
            hours: 0,
            minutes: 30
          },
          xpGain: 50,
        },
        {
          training_id: 1,
          date: "2025-05-03",
          day_index: 2,
          duration: {
            hours: 1,
            minutes: 30
          },
          xpGain: 100,
        },
      ],
      default_trainings: {
        ids: [1, 2, 3]
      },
      edited_trainings: [
        {
          id: 1,
          name: "Treino de inferiores",
          image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3ltfGVufDB8fDB8fHww",
          category: "Pernas",
          type: "Ficha iniciante",
          days: [
            {
              id: 1,
              xp: 100,
              name: "Dia 1 - Gluteos e Posterior de Coxa",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            },
            {
              id: 2,
              xp: 150,
              name: "Dia 2 - Quadriceps e Panturrilha",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            }
          ]
        },
        {
          id: 2,
          name: "Treino de superiores",
          image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3ltfGVufDB8fDB8fHww",
          category: "Superiores",
          type: "Ficha intermedi√°ria",
          days: [
            {
              id: 1,
              xp: 50,
              name: "Dia 1 - Costas",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            },
            {
              id: 2,
              xp: 75,
              name: "Dia 2 - Ombro",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            }
          ]
        },
        {
          id: 3,
          image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3ltfGVufDB8fDB8fHww",
          name: "Treino de seila",
          category: "Superiores",
          type: "Ficha intermedi√°ria",
          days: [
            {
              id: 1,
              xp: 50,
              name: "Dia 1 - Costas",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            },
            {
              id: 2,
              xp: 75,
              name: "Dia 2 - Ombro",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            }
          ]
        },
        {
          id: 4,
          name: "Treino 45",
          image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3ltfGVufDB8fDB8fHww",
          category: "Superiores",
          type: "Ficha intermedi√°ria",
          days: [
            {
              id: 1,
              xp: 50,
              name: "Dia 1 - Costas",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            },
            {
              id: 2,
              xp: 75,
              name: "Dia 2 - Ombro",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            }
          ]
        },
        {
          id: 5,
          name: "Treino 90",
          image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3ltfGVufDB8fDB8fHww",
          category: "Superiores",
          type: "Ficha intermedi√°ria",
          days: [
            {
              id: 1,
              xp: 50,
              name: "Dia 1 - Costas",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            },
            {
              id: 2,
              xp: 75,
              name: "Dia 2 - Ombro",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            }
          ]
        }
      ]
    };

    if (!localStorage.getItem('gymAppData')) {
      localStorage.setItem('gymAppData', JSON.stringify(initialData));
    } else {

    }


  });

  document.addEventListener("DOMContentLoaded", function () {
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.forEach(function (tooltipTriggerEl) {
      new bootstrap.Tooltip(tooltipTriggerEl);
    });
    new LayoutManager();
  });
</script>

<script src="scripts/checkinModal.js" type="module"></script>
<script src="scripts/layout.js"></script>
<script src="scripts/dashboard.js"></script>
<script src="scripts/notifications.js" type="module"></script>

<script src="scripts/level.js" type="module"></script>
<script src="scripts/dashboard-charts.js"></script>

</script>