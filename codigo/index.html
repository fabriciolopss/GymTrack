<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles/style.css">
  <link rel="stylesheet" href="styles/dashboard.css">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://cdn.jsdelivr.net/npm/gridstack@7.2.3/dist/gridstack.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/gridstack@7.2.3/dist/gridstack-all.js"></script>
  <script src="https://kit.fontawesome.com/64b9a24b58.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

  <div class="modal fade" id="checkinTreino" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <i class="fa-solid fa-dumbbell"></i>
          <h5 class="modal-title" id="exampleModalLabel">Registrar treino</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="form-checkin">
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Plano de treino</label>
              <select required class="form-select" id="training-plans" aria-label="Default select example">
                <option selected>Selecionar o plano de treino realizado</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label">Treino realizado</label>
              <select class="form-select" id="training-days" aria-label="Default select example" disabled>
                <option selected>Selecionar dia do treino realizado</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label">Data do treino</label>
              <input type="date" class="form-control" id="date-checkin">
            </div>

            <div class="mb-3">
              <label class="form-label">Tempo de treino</label>

              <div class="d-flex gap-3 mt-2">
                <div class="w-50">
                  <label for="hours-trained" class="form-label">Horas</label>
                  <div class="input-group">
                    <button class="btn btn-outline-secondary" id="decrement-hours" type="button">
                      <i class="fa-solid fa-minus"></i>
                    </button>
                    <input type="number" id="hours-trained" class="form-control text-center" value="0" min="0" max="3">
                    <button class="btn btn-outline-secondary" id="increment-hours" type="button">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                  </div>
                </div>

                <div class="w-50">
                  <label for="minutes-trained" class="form-label">Minutos</label>
                  <div class="input-group">
                    <button class="btn btn-outline-secondary" id="decrement-minutes" type="button">
                      <i class="fa-solid fa-minus"></i>
                    </button>
                    <input type="number" id="minutes-trained" class="form-control text-center" value="30" min="0"
                      max="59">
                    <button class="btn btn-outline-secondary" id="increment-minutes" type="button">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>



            <div class="xp-gain mb-3">
              <label class="form-label titulo-modal">Experiencia ganha</label>
              <div class="d-flex flex-row justify-content-between mb-2">
                <div class="d-flex flex-row align-items-center" data-bs-toggle="tooltip" data-bs-placement="top"
                  title="O ganho de XP Ã© baseado na duraÃ§Ã£o do treino e no plano escolhido.">
                  <span id="xp-gain">+0 XP
                  </span>
                  <i class="fa-solid fa-circle-info ms-2 ">
                  </i>
                </div>
                <span id="xp-porcentagem">0%</span>
                <span id="level">NÃ­vel 0</span>
              </div>
              <div class="custom-progress-wrapper mb-1">
                <div class="real-progress-bar"></div>
                <div class="future-progress-bar"></div>
              </div>


              <div class="d-flex flex-row justify-content-between">
                <span id="xp-low-limit">1320XP</span>
                <span id="xp-high-limit">5000XP</span>
              </div>
            </div>


            <button type="submit" class="btn btn-primary">Registrar treino</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="content-wrapper">
    <header>
      <div class="d-flex flex-row header">
        <div class="header-item" redirect-session-name="perfil"><i data-lucide="user"></i></div>
        <div class="header-item" redirect-session-name="index">Dashboard</div>
        <div class="header-item" redirect-session-name="consultar-fichas">Consultar fichas</div>
        <div class="header-item" redirect-session-name="progresso">Progresso</div>
        <div class="header-item" redirect-session-name="historico"><i class="fa-solid fa-clock-rotate-left"></i></div>
        <div class="header-item" redirect-session-name="notificacoes"><i data-lucide="bell-dot"></i></div>
        <button class="btn btn-primary abrir-modal"
          style="white-space: nowrap; display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; font-weight: 500; border-radius: 0.375rem;"
          data-bs-toggle="modal" data-bs-target="#checkinTreino">
          <i class="fas fa-dumbbell"></i> Registrar treino
        </button>

      </div>
    </header>

    <div id="main-content">
      <div class="dashboard-wrapper">
        <div class="dashboard-header">
          <p class="dashboard-subtitle">Bem vindo de volta, <span id="user-name"></span>ðŸ‘‹</p>
          <p class="dashboard-title">Um breve resumo dos seus treinos!</p>[
        </div>


        <div class="dashboard-body">
          <div class="grid-stack">
          </div>
        </div>

      </div>
    </div>
  </div>

  <div id="toast-template" class="toast align-items-center border-0 text-white d-none" role="alert"
    aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">Mensagem padrÃ£o</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
        aria-label="Close"></button>
    </div>
  </div>

  <div id="toast-container" class="position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>
  </div>
</body>

</html>

<script>
  lucide.createIcons();
  document.addEventListener("DOMContentLoaded", function () {
    const initialData = {
      profile: {
        name: "Fabricio",
        xp: 1320,
        achievements: [1, 2, 3]
      },
      registered_trainings: [
        {
          training_id: 1,
          date: "2025-05-03",
          day_index: 1,
          duration: {
            hours: 0,
            minutes: 30
          },
          xpGain: 50,
        },
        {
          training_id: 1,
          date: "2025-05-03",
          day_index: 2,
          duration: {
            hours: 1,
            minutes: 30
          },
          xpGain: 100,
        },
      ],
      default_trainings: {
        ids: [1, 2, 3]
      },
      edited_trainings: [
        {
          id: 1,
          name: "Treino de inferiores",
          category: "Pernas",
          type: "Ficha iniciante",
          days: [
            {
              id: 1,
              xp: 100,
              name: "Dia 1 - Gluteos e Posterior de Coxa",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            },
            {
              id: 2,
              xp: 150,
              name: "Dia 2 - Quadriceps e Panturrilha",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            }
          ]
        },
        {
          id: 2,
          name: "Treino de superiores",
          category: "Superiores",
          type: "Ficha intermediÃ¡ria",
          days: [
            {
              id: 1,
              xp: 50,
              name: "Dia 1 - Costas",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            },
            {
              id: 2,
              xp: 75,
              name: "Dia 2 - Ombro",
              day: [
                { exercise: "Supino reto", series: 4, repetitions: "8-12" },
                { exercise: "Supino inclinado", series: 4, repetitions: "8-12" },
                { exercise: "Supino transversal", series: 4, repetitions: "8-12" }
              ]
            }
          ]
        }
      ]
    };

    if (!localStorage.getItem('gymAppData')) {
      localStorage.setItem('gymAppData', JSON.stringify(initialData));
    } else {

    }


  });

  document.addEventListener("DOMContentLoaded", function () {
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.forEach(function (tooltipTriggerEl) {
      new bootstrap.Tooltip(tooltipTriggerEl);
    });
    new LayoutManager();
  });
</script>

<script src="scripts/checkinModal.js" type="module"></script>
<script src="scripts/layout.js"></script>
<script src="scripts/dashboard.js"></script>
<script src="scripts/level.js" type="module"></script>